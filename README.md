# 下载工具

一个功能强大的命令行下载工具，支持断点续传、自动重试、代理等功能。

## 功能特性

- 🚀 **断点续传**：支持从中断位置继续下载
- 🔄 **自动重试**：下载失败时自动重试，可设置重试间隔
- 🌐 **代理支持**：支持HTTP代理
- 🔒 **SSL控制**：可选择忽略SSL证书验证
- 📊 **实时进度**：显示下载百分比、文件大小和下载速率
- ⚡ **快速超时**：10秒连接超时，提高响应速度

## 使用方法

### 基本用法
```bash
python main.py -l <下载链接>
```

### 完整参数
```bash
python main.py -l <链接> [-p <代理>] [-r <重试间隔>] [-i]
```

### 参数说明

| 参数 | 长参数 | 必填 | 说明 | 示例 |
|------|--------|------|------|------|
| `-l` | `--link` | ✅ | 下载链接 | `-l https://example.com/file.zip` |
| `-p` | `--proxy` | ❌ | HTTP代理 | `-p 127.0.0.1:6666` |
| `-r` | `--retry-interval` | ❌ | 重试间隔（秒） | `-r 5` |
| `-i` | `--ignore-ssl-errors` | ❌ | 忽略SSL警告且不显示错误详情 | `-i` |

## 使用示例

### 1. 基本下载
```bash
python main.py -l https://example.com/document.pdf
```

### 2. 使用代理下载
```bash
python main.py -l https://example.com/video.mp4 -p 127.0.0.1:6666
```

### 3. 自定义重试间隔
```bash
python main.py -l https://example.com/software.exe -r 10
```

### 4. 忽略SSL错误（适用于自签名证书）
```bash
python main.py -l https://localhost/file.zip -i
```

### 5. 组合使用
```bash
python main.py -l https://example.com/large_file.iso -p 127.0.0.1:6666 -r 5 -i
```

## 输出格式

### 下载进度显示
工具会实时显示下载进度：
```
45.2% (10.5 MB/23.2 MB) 2.1 MB/s
```

- **45.2%**：完成百分比
- **10.5 MB/23.2 MB**：已下载/总大小
- **2.1 MB/s**：当前下载速率

### 完成信息
```
下载完成！文件保存至：C:\Users\用户名\Downloads\filename.zip
```

## 文件保存位置

下载的文件默认保存在Windows系统的下载文件夹中：
```
C:\Users\当前用户名\Downloads\
```

## 错误处理

### 正常模式
- 显示详细的错误信息
- 显示SSL警告（如果存在）
- 自动重试并显示失败原因

### 忽略SSL模式（-i参数）
- 屏蔽SSL警告信息
- 不显示具体的失败原因，只显示"第X次尝试失败"
- 适用于批量下载或自动化场景

## 注意事项

1. **网络要求**：需要稳定的网络连接
2. **磁盘空间**：确保下载目录有足够的磁盘空间
3. **防火墙**：某些网络环境可能需要配置防火墙
4. **代理设置**：使用代理时请确保代理服务器可用

## 技术特性

- **超时设置**：10秒连接超时，避免长时间等待
- **断点续传**：基于HTTP Range请求实现
- **文件校验**：下载完成后自动校验文件完整性
- **内存友好**：使用流式下载，大文件不会占用过多内存
- **跨进程续传**：程序重启后可继续之前的下载进度

## 系统要求

- 操作系统：Windows
- Python：3.6+
- 依赖库：`requests`、`urllib3`

## 安装依赖

```bash
pip install requests urllib3
```

## 常见问题

### Q: 下载中断后如何继续？
A: 重新运行相同命令，程序会自动检测已下载的部分并继续下载。

### Q: 如何处理SSL证书错误？
A: 使用 `-i` 参数忽略SSL验证，但请注意安全性。

### Q: 下载速度很慢怎么办？
A: 可以尝试使用代理或检查网络连接质量。

### Q: 支持哪些文件格式？
A: 支持所有HTTP可访问的文件类型。

---

**注意**：本工具仅用于合法的文件下载用途，请遵守相关法律法规和网站的使用条款。